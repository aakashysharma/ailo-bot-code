2025-10-29 15:17:11 - AILO - INFO - [_setup_logging:108] - ================================================================================
2025-10-29 15:17:11 - AILO - INFO - [_setup_logging:109] - AILO Chatbot Logging System Initialized
2025-10-29 15:17:11 - AILO - INFO - [_setup_logging:110] - ================================================================================
2025-10-29 15:17:11 - AILO - INFO - [interactive_chat:795] - Interactive chat session started
2025-10-29 15:17:11 - AILO - INFO - [interactive_chat:799] - Testing LM Studio connection...
2025-10-29 15:17:11 - AILO - INFO - [test_connection:758] - Testing connection to LM Studio server...
2025-10-29 15:17:11 - AILO - DEBUG - [test_connection:759] - Server URL: http://localhost:1234/v1
2025-10-29 15:17:11 - AILO - DEBUG - [test_connection:764] - Response status: 200
2025-10-29 15:17:11 - AILO - INFO - [test_connection:768] - ✅ Connected to LM Studio server
2025-10-29 15:17:11 - AILO - INFO - [test_connection:769] - Available models: {'data': [{'id': 'gemma-3n-e4b-it-mlx', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'text-embedding-nomic-embed-text-v1.5', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'deepseek-coder-6.7b-instruct', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'gemma-2-9b-it', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'meta-llama-3.1-8b-instruct', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'phi-3.1-mini-4k-instruct', 'object': 'model', 'owned_by': 'organization_owner'}], 'object': 'list'}
2025-10-29 15:17:11 - AILO - INFO - [load_knowledge_base:164] - ============================================================
2025-10-29 15:17:11 - AILO - INFO - [load_knowledge_base:165] - STARTING KNOWLEDGE BASE LOADING
2025-10-29 15:17:11 - AILO - INFO - [load_knowledge_base:166] - ============================================================
2025-10-29 15:17:11 - AILO - INFO - [load_knowledge_base:167] - Data directory: utdanning_data
2025-10-29 15:17:11 - AILO - DEBUG - [load_knowledge_base:171] - Looking for vectorization dataset at: utdanning_data/processed/text_for_llm/vectorization_dataset.json
2025-10-29 15:17:11 - AILO - INFO - [load_knowledge_base:175] - Vectorization dataset found, loading...
2025-10-29 15:17:15 - AILO - INFO - [load_knowledge_base:180] - ✓ Successfully loaded 50845 documents into knowledge base
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:228] - Creating knowledge base index by categories...
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:269] - ✓ Knowledge base indexed by categories:
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:271] -   - yrker: 9519 documents
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:271] -   - utdanning: 40068 documents
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:271] -   - lønn: 50 documents
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:271] -   - læreplass: 11422 documents
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:271] -   - skole: 10597 documents
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:271] -   - arbeidsmarked: 8277 documents
2025-10-29 15:17:15 - AILO - INFO - [_index_knowledge_base:272] - ============================================================
2025-10-29 15:17:15 - AILO - INFO - [interactive_chat:820] - Interactive chat ready with 50845 documents
2025-10-29 15:17:36 - AILO - INFO - [interactive_chat:838] - --- Interaction #1 ---
2025-10-29 15:17:36 - AILO - INFO - [interactive_chat:862] - Processing user input: I am studying in germany and would like to come to Norway. What are my options....
2025-10-29 15:17:36 - AILO - INFO - [chat:586] - ================================================================================
2025-10-29 15:17:36 - AILO - INFO - [chat:587] - NEW CHAT REQUEST
2025-10-29 15:17:36 - AILO - INFO - [chat:588] - ================================================================================
2025-10-29 15:17:36 - AILO - INFO - [chat:589] - User message: I am studying in germany and would like to come to Norway. What are my options.
2025-10-29 15:17:36 - AILO - DEBUG - [chat:590] - Include context: True
2025-10-29 15:17:36 - AILO - DEBUG - [chat:599] - Knowledge base loaded with 50845 documents
2025-10-29 15:17:36 - AILO - INFO - [chat:602] - Preparing context from knowledge base...
2025-10-29 15:17:36 - AILO - DEBUG - [_prepare_context:452] - Preparing context for user query...
2025-10-29 15:17:36 - AILO - INFO - [search_knowledge_base:285] - ============================================================
2025-10-29 15:17:36 - AILO - INFO - [search_knowledge_base:286] - KNOWLEDGE BASE SEARCH
2025-10-29 15:17:36 - AILO - INFO - [search_knowledge_base:287] - ============================================================
2025-10-29 15:17:36 - AILO - INFO - [search_knowledge_base:288] - Query: I am studying in germany and would like to come to Norway. What are my options.
2025-10-29 15:17:36 - AILO - DEBUG - [search_knowledge_base:293] - Max results requested: 5
2025-10-29 15:17:36 - AILO - DEBUG - [search_knowledge_base:300] - Extracted key terms: {'like', 'what', 'germany', 'come', 'options.', 'studying', 'would', 'norway.'}
2025-10-29 15:17:36 - AILO - INFO - [search_knowledge_base:304] - Question type identified: general
2025-10-29 15:17:36 - AILO - DEBUG - [search_knowledge_base:306] - Searching through 50845 documents...
2025-10-29 15:17:36 - AILO - DEBUG - [_score_document:431] - Doc '26457' scored 6.00: text_match(like): +5, content_length(long): +1...
2025-10-29 15:17:36 - AILO - DEBUG - [_score_document:431] - Doc '26473' scored 6.00: text_match(like): +5, content_length(long): +1...
2025-10-29 15:17:36 - AILO - DEBUG - [_score_document:431] - Doc '30174' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:36 - AILO - DEBUG - [_score_document:431] - Doc '30375' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:36 - AILO - DEBUG - [_score_document:431] - Doc '32056' scored 6.00: text_match(like): +5, content_length(long): +1...
2025-10-29 15:17:36 - AILO - DEBUG - [_score_document:431] - Doc '32699' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:36 - AILO - DEBUG - [_score_document:431] - Doc '32900' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:36 - AILO - DEBUG - [_score_document:431] - Doc '32914' scored 6.00: text_match(like): +5, content_length(long): +1...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '34821' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '34822' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '37608' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '37609' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '37610' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '44508' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '44709' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46827' scored 6.00: text_match(like): +4, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46829' scored 6.00: text_match(like): +4, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46831' scored 6.00: text_match(like): +4, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46833' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46835' scored 6.00: text_match(like): +4, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46836' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46840' scored 6.00: text_match(like): +4, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46841' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46843' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46844' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46848' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46849' scored 6.00: text_match(like): +4, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46862' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46863' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46864' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46867' scored 6.00: text_match(like): +4, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '46876' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '48012' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '48213' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '48250' scored 7.00: text_match(like): +5, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - DEBUG - [_score_document:431] - Doc '48251' scored 6.00: text_match(like): +4, content_length(optimal): +2...
2025-10-29 15:17:37 - AILO - INFO - [search_knowledge_base:314] - Found 45057 documents with score > 0
2025-10-29 15:17:37 - AILO - INFO - [search_knowledge_base:320] - Returning top 5 results:
2025-10-29 15:17:37 - AILO - INFO - [search_knowledge_base:324] -   1. Score: 7.00 - 30174 - Informasjon fra Onet Yrker Interesse 338
2025-10-29 15:17:37 - AILO - INFO - [search_knowledge_base:324] -   2. Score: 7.00 - 30375 - Informasjon fra Onet Yrker Interesse 539
2025-10-29 15:17:37 - AILO - INFO - [search_knowledge_base:324] -   3. Score: 7.00 - 32699 - Informasjon fra Onet Yrker
2025-10-29 15:17:37 - AILO - INFO - [search_knowledge_base:324] -   4. Score: 7.00 - 32900 - Informasjon fra Onet Yrker
2025-10-29 15:17:37 - AILO - INFO - [search_knowledge_base:324] -   5. Score: 7.00 - 34821 - Informasjon fra Informasjon om lærebedrifter og læ
2025-10-29 15:17:37 - AILO - INFO - [search_knowledge_base:326] - ============================================================
2025-10-29 15:17:37 - AILO - INFO - [_prepare_context:459] - Building context from 5 relevant documents
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:468] - Processing doc 1: Informasjon fra Onet Yrker Interesse 338... from onet/yrker/interesse/338
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/bore-_og_vedlikeholdsoperator
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:468] - Processing doc 2: Informasjon fra Onet Yrker Interesse 539... from onet/yrker/interesse/539
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/veidrift-_og_veivedlikeholdsarbeider
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:468] - Processing doc 3: Informasjon fra Onet Yrker... from onet/yrker
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/bore-_og_vedlikeholdsoperator
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:468] - Processing doc 4: Informasjon fra Onet Yrker... from onet/yrker
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/veidrift-_og_veivedlikeholdsarbeider
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:468] - Processing doc 5: Informasjon fra Informasjon om lærebedrifter og læ... from finnlarebedrift/naringskodevelger/2
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/nb/finn-larebedrift
2025-10-29 15:17:37 - AILO - DEBUG - [_prepare_context:500] -   Truncated text from 1495 to 1000 chars
2025-10-29 15:17:37 - AILO - INFO - [_prepare_context:513] - ✓ Context prepared: 4334 characters total
2025-10-29 15:17:37 - AILO - DEBUG - [chat:605] - Context length: 4334 characters
2025-10-29 15:17:37 - AILO - INFO - [chat:619] - Building message array for LLM...
2025-10-29 15:17:37 - AILO - DEBUG - [chat:627] - Added system prompt
2025-10-29 15:17:37 - AILO - DEBUG - [chat:634] - Added context to messages
2025-10-29 15:17:37 - AILO - DEBUG - [chat:643] - Added source citation reminder
2025-10-29 15:17:37 - AILO - DEBUG - [chat:660] - Added current user message
2025-10-29 15:17:37 - AILO - INFO - [chat:662] - Total messages in API call: 4
2025-10-29 15:17:37 - AILO - INFO - [chat:665] - Calling LM Studio API at http://localhost:1234/v1...
2025-10-29 15:17:37 - AILO - DEBUG - [chat:674] - API Payload: model=gemma-3n-E4B-it-MLX-bf16, temperature=0.5, max_tokens=1500
2025-10-29 15:17:48 - AILO - DEBUG - [chat:680] - API Response Status: 200
2025-10-29 15:17:48 - AILO - INFO - [chat:686] - ✓ Successfully received response from LLM
2025-10-29 15:17:48 - AILO - INFO - [chat:687] - Response length: 1170 characters
2025-10-29 15:17:48 - AILO - DEBUG - [chat:688] - Assistant response: Jeg beklager, men jeg har ikke informasjon om muligheter for å studere i Norge etter å ha studert i Tyskland. Informasjonen min er begrenset til dataene jeg har fått fra utdanning.no, og disse omhandl...
2025-10-29 15:17:48 - AILO - INFO - [chat:692] - Source citations found in response: 0
2025-10-29 15:17:48 - AILO - WARNING - [chat:696] - ⚠ Response is missing source citations!
2025-10-29 15:17:48 - AILO - DEBUG - [chat:707] - Conversation history now has 2 messages
2025-10-29 15:17:48 - AILO - INFO - [chat:709] - ================================================================================
2025-10-29 15:17:48 - AILO - INFO - [interactive_chat:866] - Response delivered to user
2025-10-29 15:18:42 - AILO - INFO - [interactive_chat:838] - --- Interaction #2 ---
2025-10-29 15:18:42 - AILO - INFO - [interactive_chat:862] - Processing user input: from where di you get the website studyinnorway.no...
2025-10-29 15:18:42 - AILO - INFO - [chat:586] - ================================================================================
2025-10-29 15:18:42 - AILO - INFO - [chat:587] - NEW CHAT REQUEST
2025-10-29 15:18:42 - AILO - INFO - [chat:588] - ================================================================================
2025-10-29 15:18:42 - AILO - INFO - [chat:589] - User message: from where di you get the website studyinnorway.no
2025-10-29 15:18:42 - AILO - DEBUG - [chat:590] - Include context: True
2025-10-29 15:18:42 - AILO - DEBUG - [chat:599] - Knowledge base loaded with 50845 documents
2025-10-29 15:18:42 - AILO - INFO - [chat:602] - Preparing context from knowledge base...
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:452] - Preparing context for user query...
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:285] - ============================================================
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:286] - KNOWLEDGE BASE SEARCH
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:287] - ============================================================
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:288] - Query: from where di you get the website studyinnorway.no
2025-10-29 15:18:42 - AILO - DEBUG - [search_knowledge_base:293] - Max results requested: 5
2025-10-29 15:18:42 - AILO - DEBUG - [search_knowledge_base:300] - Extracted key terms: {'where', 'website', 'studyinnorway.no', 'from'}
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:304] - Question type identified: general
2025-10-29 15:18:42 - AILO - DEBUG - [search_knowledge_base:306] - Searching through 50845 documents...
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:314] - Found 45057 documents with score > 0
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:320] - Returning top 5 results:
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:324] -   1. Score: 3.00 - 10773 - Informasjon fra Onet Onet Types
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:324] -   2. Score: 3.00 - 10882 - Informasjon fra Onet Onet Types
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:324] -   3. Score: 3.00 - 10883 - Informasjon fra Onet Onet Types
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:324] -   4. Score: 3.00 - 35974 - Informasjon fra Utdannings- og yrkeskategorisering
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:324] -   5. Score: 3.00 - 35985 - Informasjon fra Utdannings- og yrkeskategorisering
2025-10-29 15:18:42 - AILO - INFO - [search_knowledge_base:326] - ============================================================
2025-10-29 15:18:42 - AILO - INFO - [_prepare_context:459] - Building context from 5 relevant documents
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:468] - Processing doc 1: Informasjon fra Onet Onet Types... from onet/onet/types
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/yrker
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:468] - Processing doc 2: Informasjon fra Onet Onet Types... from onet/onet/types
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/yrker
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:468] - Processing doc 3: Informasjon fra Onet Onet Types... from onet/onet/types
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/yrker
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:468] - Processing doc 4: Informasjon fra Utdannings- og yrkeskategorisering... from kategorisystemer/nus/74
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/kategorisystemer/nus/74
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:468] - Processing doc 5: Informasjon fra Utdannings- og yrkeskategorisering... from kategorisystemer/nus/85
2025-10-29 15:18:42 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/kategorisystemer/nus/85
2025-10-29 15:18:42 - AILO - INFO - [_prepare_context:513] - ✓ Context prepared: 3365 characters total
2025-10-29 15:18:42 - AILO - DEBUG - [chat:605] - Context length: 3365 characters
2025-10-29 15:18:42 - AILO - INFO - [chat:619] - Building message array for LLM...
2025-10-29 15:18:42 - AILO - DEBUG - [chat:627] - Added system prompt
2025-10-29 15:18:42 - AILO - DEBUG - [chat:634] - Added context to messages
2025-10-29 15:18:42 - AILO - DEBUG - [chat:643] - Added source citation reminder
2025-10-29 15:18:42 - AILO - DEBUG - [chat:648] - Adding 2 previous messages from conversation history
2025-10-29 15:18:42 - AILO - DEBUG - [chat:660] - Added current user message
2025-10-29 15:18:42 - AILO - INFO - [chat:662] - Total messages in API call: 6
2025-10-29 15:18:42 - AILO - INFO - [chat:665] - Calling LM Studio API at http://localhost:1234/v1...
2025-10-29 15:18:42 - AILO - DEBUG - [chat:674] - API Payload: model=gemma-3n-E4B-it-MLX-bf16, temperature=0.5, max_tokens=1500
2025-10-29 15:18:51 - AILO - DEBUG - [chat:680] - API Response Status: 200
2025-10-29 15:18:51 - AILO - INFO - [chat:686] - ✓ Successfully received response from LLM
2025-10-29 15:18:51 - AILO - INFO - [chat:687] - Response length: 914 characters
2025-10-29 15:18:51 - AILO - DEBUG - [chat:688] - Assistant response: Jeg beklager for forvirringen! Jeg har ikke direkte tilgang til en ekstern database eller minnet om hvor jeg "fikk" informasjonen om Study in Norway. Jeg er trent på et stort datasett, og denne inform...
2025-10-29 15:18:51 - AILO - INFO - [chat:692] - Source citations found in response: 0
2025-10-29 15:18:51 - AILO - WARNING - [chat:696] - ⚠ Response is missing source citations!
2025-10-29 15:18:51 - AILO - DEBUG - [chat:707] - Conversation history now has 4 messages
2025-10-29 15:18:51 - AILO - INFO - [chat:709] - ================================================================================
2025-10-29 15:18:51 - AILO - INFO - [interactive_chat:866] - Response delivered to user
2025-10-29 15:39:18 - AILO - INFO - [interactive_chat:838] - --- Interaction #3 ---
2025-10-29 15:39:18 - AILO - INFO - [interactive_chat:862] - Processing user input: hi...
2025-10-29 15:39:18 - AILO - INFO - [chat:586] - ================================================================================
2025-10-29 15:39:18 - AILO - INFO - [chat:587] - NEW CHAT REQUEST
2025-10-29 15:39:18 - AILO - INFO - [chat:588] - ================================================================================
2025-10-29 15:39:18 - AILO - INFO - [chat:589] - User message: hi
2025-10-29 15:39:18 - AILO - DEBUG - [chat:590] - Include context: True
2025-10-29 15:39:18 - AILO - DEBUG - [chat:599] - Knowledge base loaded with 50845 documents
2025-10-29 15:39:18 - AILO - INFO - [chat:602] - Preparing context from knowledge base...
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:452] - Preparing context for user query...
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:285] - ============================================================
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:286] - KNOWLEDGE BASE SEARCH
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:287] - ============================================================
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:288] - Query: hi
2025-10-29 15:39:18 - AILO - DEBUG - [search_knowledge_base:293] - Max results requested: 5
2025-10-29 15:39:18 - AILO - DEBUG - [search_knowledge_base:300] - Extracted key terms: set()
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:304] - Question type identified: general
2025-10-29 15:39:18 - AILO - DEBUG - [search_knowledge_base:306] - Searching through 50845 documents...
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:314] - Found 45057 documents with score > 0
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:320] - Returning top 5 results:
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:324] -   1. Score: 2.00 - 2 - Informasjon fra Sammenligning av yrker og utdannin
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:324] -   2. Score: 2.00 - 8 - Informasjon fra Sammenligning av yrker og utdannin
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:324] -   3. Score: 2.00 - 9 - Informasjon fra Sammenligning av yrker og utdannin
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:324] -   4. Score: 2.00 - 11 - Informasjon fra Arbeidsmarkedsdata og statistikk
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:324] -   5. Score: 2.00 - 12 - Informasjon fra Arbeidsmarkedsdata og statistikk
2025-10-29 15:39:18 - AILO - INFO - [search_knowledge_base:326] - ============================================================
2025-10-29 15:39:18 - AILO - INFO - [_prepare_context:459] - Building context from 5 relevant documents
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:468] - Processing doc 1: Informasjon fra Sammenligning av yrker og utdannin... from sammenligning/lonn/arbeidstid-H/historie-true/sektor-P/uno/id-y/ingenior/enok
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/ingenior_i_energi_og_miljo_i_bygg
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:468] - Processing doc 2: Informasjon fra Sammenligning av yrker og utdannin... from sammenligning/arbeidsledighet/uno/id-y/landbruk/mek
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/sammenligning/y/landbruk
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:468] - Processing doc 3: Informasjon fra Sammenligning av yrker og utdannin... from sammenligning/lonn/arbeidstid-H/historie-true/sektor-A/uno/id-y/gravor
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/gravor
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:468] - Processing doc 4: Informasjon fra Arbeidsmarkedsdata og statistikk... from arbeidsmarkedskart/stedsvelger/1
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/arbeidsmarked
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:468] - Processing doc 5: Informasjon fra Arbeidsmarkedsdata og statistikk... from arbeidsmarkedskart/stedsvelger/2
2025-10-29 15:39:18 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/arbeidsmarked
2025-10-29 15:39:18 - AILO - INFO - [_prepare_context:513] - ✓ Context prepared: 2728 characters total
2025-10-29 15:39:18 - AILO - DEBUG - [chat:605] - Context length: 2728 characters
2025-10-29 15:39:18 - AILO - INFO - [chat:619] - Building message array for LLM...
2025-10-29 15:39:18 - AILO - DEBUG - [chat:627] - Added system prompt
2025-10-29 15:39:18 - AILO - DEBUG - [chat:634] - Added context to messages
2025-10-29 15:39:18 - AILO - DEBUG - [chat:643] - Added source citation reminder
2025-10-29 15:39:18 - AILO - DEBUG - [chat:648] - Adding 4 previous messages from conversation history
2025-10-29 15:39:18 - AILO - DEBUG - [chat:660] - Added current user message
2025-10-29 15:39:18 - AILO - INFO - [chat:662] - Total messages in API call: 8
2025-10-29 15:39:18 - AILO - INFO - [chat:665] - Calling LM Studio API at http://localhost:1234/v1...
2025-10-29 15:39:18 - AILO - DEBUG - [chat:674] - API Payload: model=gemma-3n-E4B-it-MLX-bf16, temperature=0.5, max_tokens=1500
2025-10-29 15:39:23 - AILO - DEBUG - [chat:680] - API Response Status: 200
2025-10-29 15:39:23 - AILO - INFO - [chat:686] - ✓ Successfully received response from LLM
2025-10-29 15:39:23 - AILO - INFO - [chat:687] - Response length: 258 characters
2025-10-29 15:39:23 - AILO - DEBUG - [chat:688] - Assistant response: Hei! Hyggelig å høre fra deg. 😊 Hvordan kan jeg hjelpe deg i dag? Har du noen spørsmål om utdanning eller karrierevalg i Norge som jeg kan svare på? 

Jeg er klar til å hjelpe deg så godt jeg kan, bas...
2025-10-29 15:39:23 - AILO - INFO - [chat:692] - Source citations found in response: 0
2025-10-29 15:39:23 - AILO - WARNING - [chat:696] - ⚠ Response is missing source citations!
2025-10-29 15:39:23 - AILO - DEBUG - [chat:707] - Conversation history now has 6 messages
2025-10-29 15:39:23 - AILO - INFO - [chat:709] - ================================================================================
2025-10-29 15:39:23 - AILO - INFO - [interactive_chat:866] - Response delivered to user
2025-10-29 15:39:36 - AILO - INFO - [interactive_chat:838] - --- Interaction #4 ---
2025-10-29 15:39:36 - AILO - INFO - [interactive_chat:841] - User requested exit
2025-10-29 15:39:36 - AILO - INFO - [interactive_chat:843] - Interactive session ended after 4 interactions
2025-10-29 15:39:36 - AILO - INFO - [main:891] - AILO Application Shutdown
2025-10-29 15:39:36 - AILO - INFO - [main:892] - ================================================================================
