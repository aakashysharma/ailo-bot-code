2025-10-29 14:27:26 - AILO - INFO - [_setup_logging:108] - ================================================================================
2025-10-29 14:27:26 - AILO - INFO - [_setup_logging:109] - AILO Chatbot Logging System Initialized
2025-10-29 14:27:26 - AILO - INFO - [_setup_logging:110] - ================================================================================
2025-10-29 14:27:26 - AILO - INFO - [interactive_chat:795] - Interactive chat session started
2025-10-29 14:27:26 - AILO - INFO - [interactive_chat:799] - Testing LM Studio connection...
2025-10-29 14:27:26 - AILO - INFO - [test_connection:758] - Testing connection to LM Studio server...
2025-10-29 14:27:26 - AILO - DEBUG - [test_connection:759] - Server URL: http://localhost:1234/v1
2025-10-29 14:27:26 - AILO - DEBUG - [test_connection:764] - Response status: 200
2025-10-29 14:27:26 - AILO - INFO - [test_connection:768] - ✅ Connected to LM Studio server
2025-10-29 14:27:26 - AILO - INFO - [test_connection:769] - Available models: {'data': [{'id': 'gemma-3n-e4b-it-mlx', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'text-embedding-nomic-embed-text-v1.5', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'deepseek-coder-6.7b-instruct', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'gemma-2-9b-it', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'meta-llama-3.1-8b-instruct', 'object': 'model', 'owned_by': 'organization_owner'}, {'id': 'phi-3.1-mini-4k-instruct', 'object': 'model', 'owned_by': 'organization_owner'}], 'object': 'list'}
2025-10-29 14:27:26 - AILO - INFO - [load_knowledge_base:164] - ============================================================
2025-10-29 14:27:26 - AILO - INFO - [load_knowledge_base:165] - STARTING KNOWLEDGE BASE LOADING
2025-10-29 14:27:26 - AILO - INFO - [load_knowledge_base:166] - ============================================================
2025-10-29 14:27:26 - AILO - INFO - [load_knowledge_base:167] - Data directory: utdanning_data
2025-10-29 14:27:26 - AILO - DEBUG - [load_knowledge_base:171] - Looking for vectorization dataset at: utdanning_data/processed/text_for_llm/vectorization_dataset.json
2025-10-29 14:27:26 - AILO - INFO - [load_knowledge_base:175] - Vectorization dataset found, loading...
2025-10-29 14:27:30 - AILO - INFO - [load_knowledge_base:180] - ✓ Successfully loaded 33873 documents into knowledge base
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:228] - Creating knowledge base index by categories...
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:269] - ✓ Knowledge base indexed by categories:
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:271] -   - yrker: 7700 documents
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:271] -   - utdanning: 24211 documents
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:271] -   - lønn: 46 documents
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:271] -   - læreplass: 8698 documents
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:271] -   - skole: 7992 documents
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:271] -   - arbeidsmarked: 3613 documents
2025-10-29 14:27:30 - AILO - INFO - [_index_knowledge_base:272] - ============================================================
2025-10-29 14:27:30 - AILO - INFO - [interactive_chat:820] - Interactive chat ready with 33873 documents
2025-10-29 14:27:34 - AILO - INFO - [interactive_chat:838] - --- Interaction #1 ---
2025-10-29 14:27:34 - AILO - INFO - [interactive_chat:862] - Processing user input: help me...
2025-10-29 14:27:34 - AILO - INFO - [chat:586] - ================================================================================
2025-10-29 14:27:34 - AILO - INFO - [chat:587] - NEW CHAT REQUEST
2025-10-29 14:27:34 - AILO - INFO - [chat:588] - ================================================================================
2025-10-29 14:27:34 - AILO - INFO - [chat:589] - User message: help me
2025-10-29 14:27:34 - AILO - DEBUG - [chat:590] - Include context: True
2025-10-29 14:27:34 - AILO - DEBUG - [chat:599] - Knowledge base loaded with 33873 documents
2025-10-29 14:27:34 - AILO - INFO - [chat:602] - Preparing context from knowledge base...
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:452] - Preparing context for user query...
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:285] - ============================================================
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:286] - KNOWLEDGE BASE SEARCH
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:287] - ============================================================
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:288] - Query: help me
2025-10-29 14:27:34 - AILO - DEBUG - [search_knowledge_base:293] - Max results requested: 5
2025-10-29 14:27:34 - AILO - DEBUG - [search_knowledge_base:300] - Extracted key terms: {'help'}
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:304] - Question type identified: general
2025-10-29 14:27:34 - AILO - DEBUG - [search_knowledge_base:306] - Searching through 33873 documents...
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:314] - Found 29950 documents with score > 0
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:320] - Returning top 5 results:
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:324] -   1. Score: 4.00 - 3143 - Informasjon fra Utdannings- og yrkeskategorisering
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:324] -   2. Score: 4.00 - 21932 - Informasjon fra Onet Yrker Interesse 462
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:324] -   3. Score: 4.00 - 24438 - Informasjon fra Onet Yrker
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:324] -   4. Score: 4.00 - 15433 - Informasjon fra Utdannings- og yrkeskategorisering
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:324] -   5. Score: 4.00 - 30187 - Informasjon fra Onet Yrker Interesse 462 (Del 1)
2025-10-29 14:27:34 - AILO - INFO - [search_knowledge_base:326] - ============================================================
2025-10-29 14:27:34 - AILO - INFO - [_prepare_context:459] - Building context from 5 relevant documents
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:468] - Processing doc 1: Informasjon fra Utdannings- og yrkeskategorisering... from kategorisystemer/styrk08/193
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/kategorisystemer/styrk08/193
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:468] - Processing doc 2: Informasjon fra Onet Yrker Interesse 462... from onet/yrker/interesse/462
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/supportkonsulent
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:468] - Processing doc 3: Informasjon fra Onet Yrker... from onet/yrker
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/supportkonsulent
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:468] - Processing doc 4: Informasjon fra Utdannings- og yrkeskategorisering... from kategorisystemer/styrk08/193
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/kategorisystemer/styrk08/193
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:468] - Processing doc 5: Informasjon fra Onet Yrker Interesse 462 (Del 1)... from onet/yrker/interesse/462
2025-10-29 14:27:34 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/supportkonsulent
2025-10-29 14:27:34 - AILO - INFO - [_prepare_context:513] - ✓ Context prepared: 3270 characters total
2025-10-29 14:27:34 - AILO - DEBUG - [chat:605] - Context length: 3270 characters
2025-10-29 14:27:34 - AILO - INFO - [chat:619] - Building message array for LLM...
2025-10-29 14:27:34 - AILO - DEBUG - [chat:627] - Added system prompt
2025-10-29 14:27:34 - AILO - DEBUG - [chat:634] - Added context to messages
2025-10-29 14:27:34 - AILO - DEBUG - [chat:643] - Added source citation reminder
2025-10-29 14:27:34 - AILO - DEBUG - [chat:660] - Added current user message
2025-10-29 14:27:34 - AILO - INFO - [chat:662] - Total messages in API call: 4
2025-10-29 14:27:34 - AILO - INFO - [chat:665] - Calling LM Studio API at http://localhost:1234/v1...
2025-10-29 14:27:34 - AILO - DEBUG - [chat:674] - API Payload: model=gemma-3n-E4B-it-MLX-bf16, temperature=0.5, max_tokens=1500
2025-10-29 14:27:49 - AILO - DEBUG - [chat:680] - API Response Status: 200
2025-10-29 14:27:49 - AILO - INFO - [chat:686] - ✓ Successfully received response from LLM
2025-10-29 14:27:49 - AILO - INFO - [chat:687] - Response length: 1459 characters
2025-10-29 14:27:49 - AILO - DEBUG - [chat:688] - Assistant response: Hei! Jeg er AILO, din AI-drevne karriererådgiver. Jeg hjelper deg gjerne med å utforske utdannings- og karrieremuligheter i Norge. Hva lurer du på i dag? Har du noen spesifikke tanker om hva du ønsker...
2025-10-29 14:27:49 - AILO - INFO - [chat:692] - Source citations found in response: 2
2025-10-29 14:27:49 - AILO - DEBUG - [chat:707] - Conversation history now has 2 messages
2025-10-29 14:27:49 - AILO - INFO - [chat:709] - ================================================================================
2025-10-29 14:27:49 - AILO - INFO - [interactive_chat:866] - Response delivered to user
2025-10-29 14:28:05 - AILO - INFO - [interactive_chat:838] - --- Interaction #2 ---
2025-10-29 14:28:05 - AILO - INFO - [interactive_chat:862] - Processing user input: help me...
2025-10-29 14:28:05 - AILO - INFO - [chat:586] - ================================================================================
2025-10-29 14:28:05 - AILO - INFO - [chat:587] - NEW CHAT REQUEST
2025-10-29 14:28:05 - AILO - INFO - [chat:588] - ================================================================================
2025-10-29 14:28:05 - AILO - INFO - [chat:589] - User message: help me
2025-10-29 14:28:05 - AILO - DEBUG - [chat:590] - Include context: True
2025-10-29 14:28:05 - AILO - DEBUG - [chat:599] - Knowledge base loaded with 33873 documents
2025-10-29 14:28:05 - AILO - INFO - [chat:602] - Preparing context from knowledge base...
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:452] - Preparing context for user query...
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:285] - ============================================================
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:286] - KNOWLEDGE BASE SEARCH
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:287] - ============================================================
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:288] - Query: help me
2025-10-29 14:28:05 - AILO - DEBUG - [search_knowledge_base:293] - Max results requested: 5
2025-10-29 14:28:05 - AILO - DEBUG - [search_knowledge_base:300] - Extracted key terms: {'help'}
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:304] - Question type identified: general
2025-10-29 14:28:05 - AILO - DEBUG - [search_knowledge_base:306] - Searching through 33873 documents...
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:314] - Found 29950 documents with score > 0
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:320] - Returning top 5 results:
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:324] -   1. Score: 4.00 - 3143 - Informasjon fra Utdannings- og yrkeskategorisering
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:324] -   2. Score: 4.00 - 21932 - Informasjon fra Onet Yrker Interesse 462
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:324] -   3. Score: 4.00 - 24438 - Informasjon fra Onet Yrker
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:324] -   4. Score: 4.00 - 15433 - Informasjon fra Utdannings- og yrkeskategorisering
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:324] -   5. Score: 4.00 - 30187 - Informasjon fra Onet Yrker Interesse 462 (Del 1)
2025-10-29 14:28:05 - AILO - INFO - [search_knowledge_base:326] - ============================================================
2025-10-29 14:28:05 - AILO - INFO - [_prepare_context:459] - Building context from 5 relevant documents
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:468] - Processing doc 1: Informasjon fra Utdannings- og yrkeskategorisering... from kategorisystemer/styrk08/193
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/kategorisystemer/styrk08/193
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:468] - Processing doc 2: Informasjon fra Onet Yrker Interesse 462... from onet/yrker/interesse/462
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/supportkonsulent
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:468] - Processing doc 3: Informasjon fra Onet Yrker... from onet/yrker
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/supportkonsulent
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:468] - Processing doc 4: Informasjon fra Utdannings- og yrkeskategorisering... from kategorisystemer/styrk08/193
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:489] -   Constructed URL from endpoint: https://utdanning.no/kategorisystemer/styrk08/193
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:468] - Processing doc 5: Informasjon fra Onet Yrker Interesse 462 (Del 1)... from onet/yrker/interesse/462
2025-10-29 14:28:05 - AILO - DEBUG - [_prepare_context:479] -   Found URL in metadata: https://utdanning.no/yrker/beskrivelse/supportkonsulent
2025-10-29 14:28:05 - AILO - INFO - [_prepare_context:513] - ✓ Context prepared: 3270 characters total
2025-10-29 14:28:05 - AILO - DEBUG - [chat:605] - Context length: 3270 characters
2025-10-29 14:28:05 - AILO - INFO - [chat:619] - Building message array for LLM...
2025-10-29 14:28:05 - AILO - DEBUG - [chat:627] - Added system prompt
2025-10-29 14:28:05 - AILO - DEBUG - [chat:634] - Added context to messages
2025-10-29 14:28:05 - AILO - DEBUG - [chat:643] - Added source citation reminder
2025-10-29 14:28:05 - AILO - DEBUG - [chat:648] - Adding 2 previous messages from conversation history
2025-10-29 14:28:05 - AILO - DEBUG - [chat:660] - Added current user message
2025-10-29 14:28:05 - AILO - INFO - [chat:662] - Total messages in API call: 6
2025-10-29 14:28:05 - AILO - INFO - [chat:665] - Calling LM Studio API at http://localhost:1234/v1...
2025-10-29 14:28:05 - AILO - DEBUG - [chat:674] - API Payload: model=gemma-3n-E4B-it-MLX-bf16, temperature=0.5, max_tokens=1500
2025-10-29 14:28:14 - AILO - DEBUG - [chat:680] - API Response Status: 200
2025-10-29 14:28:14 - AILO - INFO - [chat:686] - ✓ Successfully received response from LLM
2025-10-29 14:28:14 - AILO - INFO - [chat:687] - Response length: 821 characters
2025-10-29 14:28:14 - AILO - DEBUG - [chat:688] - Assistant response: Jeg forstår at du trenger hjelp. For å kunne gi deg best mulig veiledning, trenger jeg litt mer informasjon fra deg. Hva er det du ønsker hjelp med? 

For eksempel:

*   **Er du usikker på hvilket utd...
2025-10-29 14:28:14 - AILO - INFO - [chat:692] - Source citations found in response: 0
2025-10-29 14:28:14 - AILO - WARNING - [chat:696] - ⚠ Response is missing source citations!
2025-10-29 14:28:14 - AILO - DEBUG - [chat:707] - Conversation history now has 4 messages
2025-10-29 14:28:14 - AILO - INFO - [chat:709] - ================================================================================
2025-10-29 14:28:14 - AILO - INFO - [interactive_chat:866] - Response delivered to user
2025-10-29 14:28:17 - AILO - INFO - [interactive_chat:838] - --- Interaction #3 ---
2025-10-29 14:28:17 - AILO - INFO - [interactive_chat:841] - User requested exit
2025-10-29 14:28:17 - AILO - INFO - [interactive_chat:843] - Interactive session ended after 3 interactions
2025-10-29 14:28:18 - AILO - INFO - [main:891] - AILO Application Shutdown
2025-10-29 14:28:18 - AILO - INFO - [main:892] - ================================================================================
